<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cozy Autumn</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #d2691e; /* autumn background */
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-family: "Parisienne", cursive;
      font-size: 2rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
      z-index: -1; /* чтобы эффекты были на фоне */
    }

    #date {
      position: relative;
      z-index: 10;
    }
  </style>
</head>
<body>
  <div id="date"></div>
  <canvas id="canvas"></canvas>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // === Дата ===
    const now = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    document.getElementById("date").innerText = now.toLocaleDateString("en-US", options);

    // === ЭФФЕКТЫ ===
    class Leaf {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * -canvas.height;
        this.size = 20 + Math.random() * 20;
        this.speed = 1 + Math.random() * 2;
        this.angle = Math.random() * Math.PI * 2;
        this.spin = 0.02 + Math.random() * 0.02;
        this.color = ["#ff9f1c", "#ffbf69", "#d62828", "#f77f00"][Math.floor(Math.random()*4)];
      }
      update() {
        this.y += this.speed;
        this.angle += this.spin;
        if (this.y > canvas.height) {
          this.y = -this.size;
          this.x = Math.random() * canvas.width;
        }
      }
      draw() {
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.rotate(this.angle);
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.ellipse(0, 0, this.size/2, this.size, 0, 0, Math.PI*2);
        ctx.fill();
        ctx.restore();
      }
    }

    class Raindrop {
      constructor(isHeavy=false) {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * -canvas.height;
        this.length = isHeavy ? 20 + Math.random() * 10 : 10 + Math.random() * 5;
        this.speed = isHeavy ? 8 + Math.random() * 4 : 4 + Math.random() * 2;
        this.opacity = isHeavy ? 0.6 : 0.3;
      }
      update() {
        this.y += this.speed;
        if (this.y > canvas.height) {
          this.y = -this.length;
          this.x = Math.random() * canvas.width;
        }
      }
      draw() {
        ctx.strokeStyle = `rgba(255,255,255,${this.opacity})`;
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(this.x, this.y);
        ctx.lineTo(this.x, this.y + this.length);
        ctx.stroke();
      }
    }

    let leaves = [];
    let raindrops = [];
    let mode = Math.floor(Math.random() * 4); 
    // 0 - только листья, 1 - дождь, 2 - ливень, 3 - листья + дождь

    if (mode === 0) {
      for (let i = 0; i < 40; i++) leaves.push(new Leaf());
    } else if (mode === 1) {
      for (let i = 0; i < 100; i++) raindrops.push(new Raindrop(false));
    } else if (mode === 2) {
      for (let i = 0; i < 200; i++) raindrops.push(new Raindrop(true));
    } else if (mode === 3) {
      for (let i = 0; i < 30; i++) leaves.push(new Leaf());
      for (let i = 0; i < 120; i++) raindrops.push(new Raindrop(false));
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      leaves.forEach(leaf => { leaf.update(); leaf.draw(); });
      raindrops.forEach(r => { r.update(); r.draw(); });
      requestAnimationFrame(animate);
    }
    animate();

    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });
  </script>
</body>
</html>
